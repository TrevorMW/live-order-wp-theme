"use strict";(self.webpackChunkbasicwptheme=self.webpackChunkbasicwptheme||[]).push([[139],{824:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(641),a=n(33),o=n(751);const i={class:"noItemsFound container"},l={key:0,class:"noItemsIcon"},r={class:"material-symbols-outlined"},c={key:1,class:"noItemsMessage"},u={name:"NoItems",props:{icon:{type:String,required:!1,default:null},message:{type:String,required:!1,default:null},action:{type:String,required:!1,default:null},actionMessage:{type:String,required:!1,default:null}}},d=(0,n(262).A)(u,[["render",function(e,t,n,u,d,p){return(0,s.uX)(),(0,s.CE)("div",i,[n.icon?((0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("span",r,(0,a.v_)(n.icon),1)])):(0,s.Q3)("v-if",!0),n.message?((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("p",null,(0,a.v_)(n.message),1)])):(0,s.Q3)("v-if",!0),n.action&&n.actionMessage?((0,s.uX)(),(0,s.CE)("button",{key:2,class:"btn btn-tertiary",onClick:t[0]||(t[0]=(0,o.D$)((t=>e.$emit(this.action)),["prevent"]))},(0,a.v_)(n.actionMessage),1)):(0,s.Q3)("v-if",!0)])}]])},368:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(641),a=n(33);const o={class:"panel-header"},i={class:"panel-action"},l={class:"panel-content"},r={name:"Panel",props:{classes:{type:String,required:!1,default:""}},data:()=>({}),props:{},computed:{},methods:{}},c=(0,n(262).A)(r,[["render",function(e,t,n,r,c,u){return(0,s.uX)(),(0,s.CE)("section",{class:(0,a.C4)(["panel",n.classes])},[(0,s.Lk)("div",o,[(0,s.Lk)("div",null,[(0,s.RG)(e.$slots,"header")]),(0,s.Lk)("div",i,[(0,s.RG)(e.$slots,"action")])]),(0,s.Lk)("div",l,[(0,s.RG)(e.$slots,"content")])],2)}]])},139:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var s=n(641),a=n(33),o=n(751);const i={class:"container flexed pageHeader"},l={class:"container pageBody page-profile"},r={class:"generalInfo"},c=(0,s.Lk)("div",null,[(0,s.Lk)("h3",null,"General Info"),(0,s.Lk)("p",null,"Basic settings, subscription details, & password management")],-1),u={class:"userAccountData"},d=(0,s.Lk)("strong",null,"Username:",-1),p=(0,s.Lk)("strong",null,"Email:",-1),m=(0,s.Lk)("hr",null,null,-1),h={class:"potentialPOSSystems"},g=(0,s.Lk)("header",null,[(0,s.Lk)("div",null,[(0,s.Lk)("h3",null,"Connect a new POS System"),(0,s.Lk)("p",null," Connect to one or multiple POS systems to get service charge data for each POS system. ")]),(0,s.Lk)("div")],-1),k={key:0,class:"posSystemChoices alignLeft"},v=["onClick"],L=["src","alt","title"],y=(0,s.Lk)("hr",null,null,-1),f={class:"potentialPOSSystems"},C=(0,s.Lk)("header",null,[(0,s.Lk)("div",null,[(0,s.Lk)("h3",null,"Connected Merchant Accounts"),(0,s.Lk)("p",null,"All your currently connected merchant accounts.")]),(0,s.Lk)("div")],-1),S={key:0,class:"connectedPOSSystems"},w={key:0,class:"container flexed authorizedRestaurants"};var P=n(774),R=n(352),b=n(911),A=n(892),_=n(820),E=n(47),I=n(368),U=n(824);const X={class:"panelConnectedPOSHeader"},O=["src","title"],q={class:"posPanelActions"},N=[(0,s.Lk)("span",{class:"material-symbols-outlined"},"edit",-1)],M=[(0,s.Lk)("span",{class:"material-symbols-outlined"},"delete",-1)],$={key:0},D={key:1},G={name:"Merchant",components:{Panel:I.A},props:{connected:{type:Boolean,required:!0},id:{type:String,required:!0},name:{type:String,required:!0},type:{type:String,required:!0},expires:{type:String,required:!0},merchantID:{type:String,required:!0}},data:()=>({}),computed:{...(0,P.aH)(R.J,{imageURL:e=>e.imageURL})},methods:{getMerchantType:function(e){let t="";return(e&&"Square"===e.value||"square"===e.value)&&(t=this.imageURL+"Square_Jewel_Black.svg"),(e&&"Toast"===e.value||"toast"===e.value)&&(t=this.imageURL+"toast-slice-icon_white.png"),(e&&"Clover"===e.value||"clover"===e.value)&&(t=this.imageURL+"clover_logo_rgb.png"),t},deletePOS:function(e){const t=(0,R.J)(),n=(0,A.N)();t.confirmUserAction("Are you sure you want to delete this connected POS system? This change is irreversible.").then((s=>{const a=(0,b.E)();s&&(n.showLoader(),t.deletePOS(e).then((e=>{200===e.status?t.loadGlobalData().then((()=>{n.hideLoader(),a.showNotice(e.data.message,e.data.status)})):a.showNotice(e.message,200===e.status)})))}))}}};var T=n(262);const x=(0,T.A)(G,[["render",function(e,t,n,i,l,r){const c=(0,s.g2)("Panel");return(0,s.uX)(),(0,s.Wv)(c,{class:(0,a.C4)([{panelConnectedPOS:!0}])},{header:(0,s.k6)((()=>[(0,s.Lk)("div",X,[(0,s.Lk)("div",null,[n.type?((0,s.uX)(),(0,s.CE)("img",{key:0,src:r.getMerchantType({value:n.type}),alt:"POS",title:n.type},null,8,O)):(0,s.Q3)("v-if",!0)]),(0,s.Lk)("div",null,(0,a.v_)(n.name),1)])])),action:(0,s.k6)((()=>[(0,s.Lk)("div",q,[(0,s.Lk)("div",null,[(0,s.Lk)("a",{href:"",onClick:t[0]||(t[0]=(0,o.D$)((e=>this.$router.push({name:"Merchant",params:{id:n.id}})),["prevent"]))},N)]),(0,s.Lk)("div",null,[(0,s.Lk)("a",{href:"",onClick:t[1]||(t[1]=(0,o.D$)((e=>r.deletePOS(n.id)),["prevent"]))},M)]),(0,s.Lk)("div",null,[(0,s.Lk)("span",{class:(0,a.C4)([{"material-symbols-outlined":!0,wifi:!0,connected:n.connected,disconnected:!n.connected}])},(0,a.v_)(n.connected?"wifi":"wifi_off"),3)])])])),content:(0,s.k6)((()=>[(0,s.Lk)("p",null,(0,a.v_)(n.merchantID),1),n.connected?((0,s.uX)(),(0,s.CE)("p",$," Connection Expires: "+(0,a.v_)(n.expires),1)):((0,s.uX)(),(0,s.CE)("p",D,"No API Connection"))])),_:1})}]]),F={name:"Profile",components:{Panel:I.A,NoItems:U.A,GlobalLoader:E.A,Merchant:x},data:()=>({}),computed:{...(0,P.aH)(R.J,{logoutURL:e=>e.logoutURL,imageURL:e=>e.imageURL,username:e=>e.user.username,firstName:e=>e.user.firstName,email:e=>e.user.email,id:e=>e.user.id,action:e=>e.endpoints.logout.action,nonce:e=>e.endpoints.logout.nonce,merchants:e=>e.merchantAccounts,currentRestaurant:e=>e.currentRestaurant,loaded:e=>e.loaded,systems:e=>e.posSystems,endpoints:e=>e.endpoints}),...(0,P.aH)(_.A,{dataLoaded:e=>e.dataLoaded}),getGreeting:function(){return null!==this.firstName?this.firstName:this.username}},mounted(){this.$emit("componentLoaded")},watch:{$route:{handler:function(e){const t=(0,b.E)(),n=e.fullPath.replace("#_=_",""),s=this.getParamsFromURI(decodeURIComponent(n));s.get("status")&&s.get("message")&&t.showNotice(s.get("message"),s.get("status"))},immediate:!0}},props:{},methods:{...(0,P.i0)(R.J,["setCurrentRestaurant","resetUserPassword"]),isAPIConnected:function(e){return e},getParamsFromURI:function(e){const[,t]=e.split("?");return new URLSearchParams(t)},posChoiceClass:function(e){return`pos${e}`},getMerchantType:function(e){let t="";return(e&&"Square"===e.value||"square"===e.value)&&(t=this.imageURL+"Square_Jewel_Black.svg"),(e&&"Toast"===e.value||"toast"===e.value)&&(t=this.imageURL+"toast-slice-icon_white.png"),(e&&"Clover"===e.value||"clover"===e.value)&&(t=this.imageURL+"clover_logo_rgb.png"),t},reauthApp:function(){},setPOSAsActive:function(e,t){const n=(0,R.J)(),s=(0,b.E)();n.setCurrentRestaurant(e,t).then((e=>{200===e.status&&n.loadGlobalData().then((()=>{this.handleRestaurantRedirect(),s.showNotice("You are now connected to  ",!0)}))}))},handleRestaurantRedirect:function(){this.$router.push("/dashboard")},changePassword:function(e){const t=new FormData;t.append("email",e),t.append("action",this.endpoints.password.action),t.append("nonce",this.endpoints.password.nonce),this.resetUserPassword(t).then((e=>{(0,b.E)().showNotice(e.data.message,e.data.status)}))},handleOauthRedirect(e){e.authorizeLink?window.location.href=e.authorizeLink:(0,b.E)().showNotice(`Connecting to ${e.name} is coming soon, but not yet possible!`,!1)}}},J=(0,T.A)(F,[["render",function(e,t,n,P,R,b){const A=(0,s.g2)("NoItems"),_=(0,s.g2)("Merchant"),E=(0,s.g2)("GlobalLoader");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",i,[(0,s.Lk)("div",null,[(0,s.Lk)("h1",null,"Hello, "+(0,a.v_)(b.getGreeting),1)])]),(0,s.Lk)("div",l,[(0,s.Lk)("section",r,[(0,s.Lk)("header",null,[c,(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>b.changePassword(this.email)),class:(0,a.C4)([{"btn btn-small btn-primary":!0}])}," Reset Password ")])]),(0,s.Lk)("div",u,[(0,s.Lk)("p",null,[d,(0,s.eW)(" "+(0,a.v_)(this.username),1)]),(0,s.Lk)("p",null,[p,(0,s.eW)(" "+(0,a.v_)(this.email),1)])])]),m,(0,s.Lk)("section",h,[g,e.systems?((0,s.uX)(),(0,s.CE)("div",k,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.systems,((e,t)=>((0,s.uX)(),(0,s.CE)("a",{key:t,class:(0,a.C4)(["posChoice",b.posChoiceClass(e.name)]),onClick:(0,o.D$)((t=>b.handleOauthRedirect(e)),["prevent"])},[(0,s.Lk)("img",{src:b.getMerchantType({value:e.type}),alt:e.name,title:e.name},null,8,L)],10,v)))),128))])):((0,s.uX)(),(0,s.Wv)(A,{key:1,icon:"dns",message:"There are no supported POS Systems supported currently. Please come back when some POS Systems are supported."}))]),y,(0,s.Lk)("section",f,[C,e.loaded?((0,s.uX)(),(0,s.CE)("div",S,[this.merchants.length>0?((0,s.uX)(),(0,s.CE)("div",w,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.merchants,(e=>((0,s.uX)(),(0,s.Wv)(_,{key:e.id,connected:e.connected,name:e.name,type:e.type,id:e.id,expires:e.expires_on,merchantID:e.merchantID},null,8,["connected","name","type","id","expires","merchantID"])))),128))])):((0,s.uX)(),(0,s.Wv)(A,{key:1,icon:"dns",message:"There are no connected POS Systems (Merchant Accounts). To connect, please choose an option from list of oAuth providers."}))])):((0,s.uX)(),(0,s.Wv)(E,{key:1}))])])],64)}]])}}]);
//# sourceMappingURL=bundle.139.min.js.map