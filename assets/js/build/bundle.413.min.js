"use strict";(self.webpackChunkbasicwptheme=self.webpackChunkbasicwptheme||[]).push([[413],{688:(e,t,a)=>{a.d(t,{$:()=>i});var n=a(774),o=a(714),s=a(911);const i=(0,n.nY)("restaurantStore",{state:()=>({loaded:!1,restaurant:{oauth:{isConnected:!1,link:null,expiration:null,scopes:[]},jobTypes:null}}),actions:{loadRestaurantData:async function(e){this.loaded=!1;const t=core.ajaxUrl,a=new FormData;return a.append("action",core.endpoints.load_restaurant_data.action),a.append("nonce",core.endpoints.load_restaurant_data.nonce),e&&a.append("id",e),await o.A.post(t,a).then((e=>(200===e.status&&e.data&&(this.restaurant=e.data.restaurant,this.loaded=!0),e)))},saveRestaurantSettings:async function(e){const t=(0,s.E)();return t.hideNotice(),await o.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message,e.data.success),e)))},updateEmployeeData:async function(e){const t=(0,s.E)();return t.hideNotice(),await o.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message,e.data.status),e)))},reauthorizeOauth:async function(e){const t=(0,s.E)();return t.hideNotice(),await o.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message,e.data.status),e)))},disconnectOauth:async function(e){const t=(0,s.E)();return t.hideNotice(),await o.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message,e.data.status),e)))},deleteRestaurant:async function(e){const t=(0,s.E)();return t.hideNotice(),await o.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message),e)))}}})},824:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(641),o=a(33),s=a(751);const i={class:"noItemsFound container"},c={key:0,class:"noItemsIcon"},r={class:"material-symbols-outlined"},l={key:1,class:"noItemsMessage"},u={name:"NoItems",props:{icon:{type:String,required:!1,default:null},message:{type:String,required:!1,default:null},action:{type:String,required:!1,default:null},actionMessage:{type:String,required:!1,default:null}}},d=(0,a(262).A)(u,[["render",function(e,t,a,u,d,h){return(0,n.uX)(),(0,n.CE)("div",i,[a.icon?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("span",r,(0,o.v_)(a.icon),1)])):(0,n.Q3)("v-if",!0),a.message?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("p",null,(0,o.v_)(a.message),1)])):(0,n.Q3)("v-if",!0),a.action&&a.actionMessage?((0,n.uX)(),(0,n.CE)("button",{key:2,class:"btn btn-tertiary",onClick:t[0]||(t[0]=(0,s.D$)((t=>e.$emit(this.action)),["prevent"]))},(0,o.v_)(a.actionMessage),1)):(0,n.Q3)("v-if",!0)])}]])},368:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(641),o=a(33);const s={class:"panel-header"},i={class:"panel-action"},c={class:"panel-content"},r={name:"Panel",props:{classes:{type:String,required:!1,default:""}},data:()=>({}),props:{},computed:{},methods:{}},l=(0,a(262).A)(r,[["render",function(e,t,a,r,l,u){return(0,n.uX)(),(0,n.CE)("section",{class:(0,o.C4)(["panel",a.classes])},[(0,n.Lk)("div",s,[(0,n.Lk)("div",null,[(0,n.RG)(e.$slots,"header")]),(0,n.Lk)("div",i,[(0,n.RG)(e.$slots,"action")])]),(0,n.Lk)("div",c,[(0,n.RG)(e.$slots,"content")])],2)}]])},413:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(641),o=a(33),s=a(751);const i={key:0,class:"container flexed pageHeader"},c={class:""},r=["src"],l=(0,n.Lk)("hr",null,null,-1),u={key:1,class:"container pageBody page-restaurant"},d=(0,n.Lk)("header",null,[(0,n.Lk)("div",null,[(0,n.Lk)("h3",null,"Api oAuth Connection Status "),(0,n.Lk)("p",null,"Details about the current oAuth connection")]),(0,n.Lk)("div")],-1),h={class:"container oauthStatusPanels"},p={key:0},m={key:1},v=(0,n.Lk)("br",null,null,-1),k=(0,n.Lk)("br",null,null,-1),y=(0,n.Lk)("p",null,"Authorized Scopes:",-1),L={class:"authorizedScopesList"},g=(0,n.Lk)("hr",null,null,-1),b={class:"locations"},f=(0,n.Lk)("p",null,"All Restaurants for this merchant account. ",-1),D=(0,n.Lk)("div",null,null,-1),C={key:0},S={key:0,class:"container"},w=(0,n.Lk)("hr",null,null,-1),R={class:"activeSubscriptions"},I=(0,n.Lk)("header",null,[(0,n.Lk)("div",null,[(0,n.Lk)("h3",null,"Subscriptions"),(0,n.Lk)("p",null,"Current Data on Active App Subscriptions")]),(0,n.Q3)(' <div>\n        <a @click.prevent="cancelSubscription" class="btn btn-secondary">Upgrade to Paid Plan</a>&nbsp;&nbsp;\n        <a @click.prevent="cancelSubscription" class="btn btn-tertiary">Cancel Subscription</a>\n      </div> ')],-1),_={key:0,class:"container"},A={key:0},E=(0,n.Lk)("br",null,null,-1),P={key:1};var U=a(774),N=a(352),X=a(892),$=a(714),q=a(911);const x=(0,U.nY)("merchantStore",{state:()=>({loaded:!1,merchant:{oauth:{isConnected:!1,link:null,expiration:null,scopes:[]}},locations:[]}),actions:{loadMerchantData:async function(e){this.loaded=!1;const t=core.ajaxUrl,a=new FormData;return a.append("action",core.endpoints.load_merchant_data.action),a.append("nonce",core.endpoints.load_merchant_data.nonce),e&&a.append("id",e),await $.A.post(t,a).then((e=>(200===e.status&&e.data.data&&(this.merchant=e.data.data.merchant,this.locations=e.data.data.locations,this.loaded=!0),e)))},saveRestaurantSettings:async function(e){const t=(0,q.E)();return t.hideNotice(),await $.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message,e.data.success),e)))},updateEmployeeData:async function(e){const t=(0,q.E)();return t.hideNotice(),await $.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message,e.data.status),e)))},reauthorizeOauth:async function(e){const t=(0,q.E)();return t.hideNotice(),await $.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message,e.data.status),e)))},disconnectOauth:async function(e){const t=(0,q.E)();return t.hideNotice(),await $.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message,e.data.status),e)))},deleteMerchant:async function(e){const t=(0,q.E)();return t.hideNotice(),await $.A.post(core.ajaxUrl,e).then((e=>(t.showNotice(e.data.message),e)))}}});var z=a(688),O=a(368),j=a(824);const T={class:"panel-icon"},F=["src","title"],W={class:"posPanelActions"},M=[(0,n.Lk)("span",{class:"material-symbols-outlined"},"content_copy",-1)],Q=[(0,n.Lk)("span",{class:"material-symbols-outlined"},"delete",-1)],B={name:"Location",components:{Panel:O.A},props:{id:{type:String,required:!0},name:{type:String,required:!0},type:{type:Object,required:!0},isSetup:{type:Boolean,required:!0},merchantID:{type:String,required:!0},merchantPostID:{type:String,required:!0},locationID:{type:String,required:!0},locationPostID:{type:String,required:!0},timezone:{type:String,required:!0}},data:()=>({}),computed:{...(0,U.aH)(N.J,{user_id:e=>e.user.id,imageURL:e=>e.imageURL,baseURL:e=>e.baseURL}),getDashboardURL(){return`${this.baseURL}/dashboard/${this.user_id}/${this.merchantID}/${this.merchantPostID}/${this.locationID}/${this.locationPostID}/`}},methods:{getMerchantType(e){let t="";return(e&&"Square"===e.value||"square"===e.value)&&(t=this.imageURL+"Square_Jewel_Black.svg"),(e&&"Toast"===e.value||"toast"===e.value)&&(t=this.imageURL+"toast-slice-icon_white.png"),(e&&"Clover"===e.value||"clover"===e.value)&&(t=this.imageURL+"clover_logo_rgb.png"),t},deleteRestaurant(){},setActiveRestaurant:function(e,t){const a=(0,N.J)(),n=(0,q.E)();a.setCurrentRestaurant(e,t).then((e=>{200===e.status&&(n.showNotice(e.data.message,e.data.status),a.loadGlobalData().then((()=>{this.handleRestaurantRedirect()})))}))},handleRestaurantRedirect:function(){this.$router.push("/dashboard")},copyLocationDashboardURL(){}}};var G=a(262);const J=(0,G.A)(B,[["render",function(e,t,a,i,c,r){const l=(0,n.g2)("Panel");return(0,n.uX)(),(0,n.Wv)(l,{class:(0,o.C4)([{panel:!0}])},{header:(0,n.k6)((()=>[(0,n.Lk)("div",T,[(0,n.Lk)("div",null,[a.type?((0,n.uX)(),(0,n.CE)("img",{key:0,style:{width:"16px"},src:r.getMerchantType(a.type),alt:"POS",title:a.type},null,8,F)):(0,n.Q3)("v-if",!0)]),(0,n.Lk)("div",null,(0,o.v_)(a.name),1)])])),action:(0,n.k6)((()=>[(0,n.Lk)("div",W,[(0,n.Lk)("div",null,[(0,n.Lk)("a",{onClick:t[0]||(t[0]=(0,s.D$)((e=>r.copyLocationDashboardURL()),["prevent"]))},M)]),(0,n.Lk)("div",null,[(0,n.Lk)("a",{href:"",onClick:t[1]||(t[1]=(0,s.D$)((e=>r.deleteRestaurant(a.id)),["prevent"]))},Q)])])])),content:(0,n.k6)((()=>[(0,n.Lk)("p",null,"External URL: "+(0,o.v_)(r.getDashboardURL),1)])),_:1})}]]);var H=a(47);const K={name:"Merchant",components:{Panel:O.A,NoItems:j.A,Location:J,GlobalLoader:H.A},data(){},mounted(){const e=x();let t=null;"id"in this.$router.currentRoute.value.params&&(t=this.$router.currentRoute.value.params.id),e.loadMerchantData(t)},computed:{...(0,U.aH)(N.J,{imageURL:e=>e.imageURL,disconnect:e=>({nonce:e.endpoints.disconnect_oauth.nonce,action:e.endpoints.disconnect_oauth.action}),reauth:e=>({nonce:e.endpoints.reauthorize_oauth.nonce,action:e.endpoints.reauthorize_oauth.action})}),...(0,U.aH)(x,{loaded:e=>e.loaded,ID:e=>e.merchant?.ID,name:e=>e.merchant?.name,oauth:e=>e.merchant?.oauth,type:e=>e.merchant?.type,merchantID:e=>e.merchant?.merchantID,subscription:e=>e.merchant?.subscription,locations:e=>e.locations}),merchantName:function(){return`${this.name}`}},methods:{closeModal:function(){this.isOpen=!1},fieldChange:function(e){this.settings.changed=!0},disconnectOauth:function(){const e=x(),t=x(),a=new FormData;a.append("id",this.ID),a.append("action",this.disconnect.action),a.append("nonce",this.disconnect.nonce),e.disconnectOauth(a).then((()=>{t.loadRestaurantData(this.ID)}))},reauthorize:function(){const e=x(),t=(0,z.$)(),a=(0,X.N)();a.showLoader();const n=new FormData;this.ID?n.append("id",this.ID):"id"in this.$router.currentRoute.value.params&&n.append("id",this.$router.currentRoute.value.params.id),n.append("action",this.reauth.action),n.append("nonce",this.reauth.nonce),e.reauthorizeOauth(n).then((e=>{200!==e.status||e.data.status?t.loadRestaurantData(this.ID).then((()=>{a.hideLoader()})):window.location.href=e.data.redirectURL}))},cancelSubscription:function(){(0,z.$)(),(0,X.N)().showLoader(),(new FormData).append("id",this.ID)},getPOSType(e){let t="";return(e&&"Square"===e.value||"square"===e.value)&&(t=this.imageURL+"Square_Jewel_Black.svg"),(e&&"Toast"===e.value||"toast"===e.value)&&(t=this.imageURL+"toast-slice-icon_white.png"),(e&&"Clover"===e.value||"clover"===e.value)&&(t=this.imageURL+"clover_logo_rgb.png"),t},backToProfile(){this.$router.push({name:"Profile"})}}},Y=(0,G.A)(K,[["render",function(e,t,a,U,N,X){const $=(0,n.g2)("Location"),q=(0,n.g2)("NoItems"),x=(0,n.g2)("GlobalLoader"),z=(0,n.g2)("Panel");return(0,n.uX)(),(0,n.CE)(n.FK,null,[e.loaded?((0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("header",c,[e.type?((0,n.uX)(),(0,n.CE)("img",{key:0,src:X.getPOSType(e.type)},null,8,r)):(0,n.Q3)("v-if",!0),(0,n.Lk)("h1",null,(0,o.v_)(X.merchantName),1)]),(0,n.Lk)("div",null,[(0,n.Lk)("a",{onClick:t[0]||(t[0]=(0,s.D$)((e=>X.backToProfile()),["prevent"]))}," ← Back to Profile")])])):(0,n.Q3)("v-if",!0),l,e.loaded?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("section",null,[d,(0,n.Lk)("div",h,[(0,n.Lk)("p",null,[(0,n.eW)("API connection: "),(0,n.Lk)("span",{class:(0,o.C4)([{"material-symbols-outlined":!0,wifi:!0,connected:e.oauth?.isConnected,disconnected:e.oauth&&!e.oauth.isConnected,merchantAPIConnection:!0}])},(0,o.v_)(e.oauth?.isConnected?"wifi":"wifi_off"),3),(0,n.eW)("  "),(0,n.Lk)("span",{class:(0,o.C4)([{success:e.oauth?.isConnected,error:!e.oauth?.isConnected}])},(0,o.v_)(e.oauth?.isConnected?"Connected":"Disconnected"),3),e.oauth&&!e.oauth.isConnected?((0,n.uX)(),(0,n.CE)("a",{key:0,onClick:t[1]||(t[1]=(0,s.D$)(((...e)=>X.reauthorize&&X.reauthorize(...e)),["prevent"])),class:"btn btn-small btn-tertiary"},"Re-Authorize")):(0,n.Q3)("v-if",!0)]),e.oauth?.isConnected?((0,n.uX)(),(0,n.CE)("p",p,"API token expires on: "+(0,o.v_)(e.oauth?.expiration),1)):((0,n.uX)(),(0,n.CE)("p",m,[v,(0,n.eW)("This account is disconnected from Square. Please Reauthorize your oAuth connection to continue.")])),k,y,(0,n.Lk)("ul",L,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.oauth?.scopes,((e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},(0,o.v_)(e.replace("_"," ")),1)))),128))]),(0,n.Q3)(" <Panel :class=\"[{ 'panelOauthScopes': true }]\">\n          <template #header>\n            \n          </template>\n          <template #action>\n            \n          </template>\n          <template #content>\n            \n          </template>\n        </Panel> "),(0,n.Q3)(' <Panel v-if="oauth?.scopes?.length > 0" :class="[{ \'panelOauthScopes\': true }]">\n          <template #header>\n            Square API Authorized Scopes\n          </template>\n          <template #content>\n           \n          </template>\n        </Panel> ')])]),g,(0,n.Lk)("section",b,[(0,n.Lk)("header",null,[(0,n.Lk)("div",null,[(0,n.Lk)("h3",null,"All Restaurants for "+(0,o.v_)(e.name),1),f]),D]),e.loaded?((0,n.uX)(),(0,n.CE)("div",C,[this.locations.length>0?((0,n.uX)(),(0,n.CE)("div",S,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.locations,(t=>((0,n.uX)(),(0,n.Wv)($,{key:t.id,name:t.name,type:t.postype,id:t.locationID,isSetup:t.isSetup,merchantID:e.ID,merchantPostID:this.merchantID,locationID:t.id,locationPostID:t.locationID,timezone:t.timezone},null,8,["name","type","id","isSetup","merchantID","merchantPostID","locationID","locationPostID","timezone"])))),128))])):((0,n.uX)(),(0,n.Wv)(q,{key:1,icon:"dns",message:"There are no locations. To add a location, please follow setup instructions for creating a business in your POS system"}))])):((0,n.uX)(),(0,n.Wv)(x,{key:1}))]),w,(0,n.Lk)("section",R,[I,null!==e.subscription?((0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("p",null,[(0,n.eW)("Subscription Status: "),(0,n.Lk)("span",{class:(0,o.C4)(`status-${e.subscription?.status?.toLowerCase()}`)},(0,o.v_)(e.subscription?.status),3)]),(0,n.Lk)("p",null,[(0,n.eW)("Plan Type: "),(0,n.Lk)("strong",null,(0,o.v_)(e.subscription?.plan?.name),1)]),e.subscription?.billingDate?((0,n.uX)(),(0,n.CE)("p",A,[(0,n.eW)("Next Billing Date: "),(0,n.Lk)("strong",null,(0,o.v_)(e.subscription?.billingDate),1)])):(0,n.Q3)("v-if",!0),E,(0,n.bF)(z,{class:(0,o.C4)([{panelSubscriptionDetails:!0}])},{header:(0,n.k6)((()=>[(0,n.eW)(" Subscription Billing Details ")])),content:(0,n.k6)((()=>[(0,n.bF)(q,{icon:"cycle",message:"You have not yet been billed for your subscription."})])),_:1})])):((0,n.uX)(),(0,n.CE)("div",P,[(0,n.bF)(q,{icon:"money",message:"No subscription details available for your account."})]))])])):((0,n.uX)(),(0,n.Wv)(x,{key:2}))],64)}]])}}]);
//# sourceMappingURL=bundle.413.min.js.map