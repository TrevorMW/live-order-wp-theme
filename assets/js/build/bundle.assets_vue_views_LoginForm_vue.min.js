"use strict";
(self["webpackChunkbasicwptheme"] = self["webpackChunkbasicwptheme"] || []).push([["assets_vue_views_LoginForm_vue"],{

/***/ "./assets/vue/stores/global.js":
/*!*************************************!*\
  !*** ./assets/vue/stores/global.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   globalStore: () => (/* binding */ globalStore)
/* harmony export */ });
/* harmony import */ var pinia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pinia */ "./node_modules/pinia/dist/pinia.mjs");
/* harmony import */ var Axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! Axios */ "./node_modules/Axios/lib/axios.js");
/* harmony import */ var _stores_notice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../stores/notice */ "./assets/vue/stores/notice.js");





const globalStore = (0,pinia__WEBPACK_IMPORTED_MODULE_1__.defineStore)('globalStore', {
  state: () => {
    return {
      loaded: false,
      data: null
    }
  },
  actions: {
    loadGlobalData: async function () {
      const url = core.ajaxUrl;
      const data = new FormData();

      data.append('action', core.endpoints.load_global_data.action);
      data.append('nonce', core.endpoints.load_global_data.nonce);

      const resp = await Axios__WEBPACK_IMPORTED_MODULE_2__["default"].post(url, data).then((resp) => {
        if (resp.status === 200 && resp.data) {
          Object.assign(this, resp.data);
          this.loaded = true;
        }

        return resp;
      });

      return resp;
    },
    setCurrentRestaurant: async function (id, user_id) {
      const url = core.ajaxUrl;
      const data = new FormData();

      data.append('action', this.endpoints.set_current_restaurant.action);
      data.append('nonce', this.endpoints.set_current_restaurant.nonce);
      data.append('user_id', user_id);
      data.append('restaurant_id', id);

      const resp = await Axios__WEBPACK_IMPORTED_MODULE_2__["default"].post(url, data);

      return resp;
    },
    unsetCurrentRestaurant: async function (id) {
      const url = core.ajaxUrl;
      const data = new FormData();
    
      data.append('action', this.endpoints.unset_current_restaurant.action);
      data.append('nonce', this.endpoints.unset_current_restaurant.nonce);
      data.append('user_id', id);

      const resp = await Axios__WEBPACK_IMPORTED_MODULE_2__["default"].post(url, data);

      return resp;
    },
    logUserIn: async function(data){
      const ns = (0,_stores_notice__WEBPACK_IMPORTED_MODULE_0__.noticeStore)();

      ns.hideNotice();

      return await Axios__WEBPACK_IMPORTED_MODULE_2__["default"].post(core.ajaxUrl, data).then((resp) => {
        if (resp.status === 200) {
          ns.showNotice(resp.data.message, true);

          if (!resp.data.status) {
            ns.showNotice(resp.data.message, false);
          }
        } else {
          ns.showNotice(resp.data.message, false);
        }

        return resp;
      });
    },
    resetUserPassword: async function(data){
      const ns = (0,_stores_notice__WEBPACK_IMPORTED_MODULE_0__.noticeStore)();

      ns.hideNotice();

      return await Axios__WEBPACK_IMPORTED_MODULE_2__["default"].post(core.ajaxUrl, data).then((resp) => {
        if (resp.status === 200) {
          ns.showNotice(resp.data.message, true);

          if (!resp.data.status) {
            ns.showNotice(resp.data.message, false);
          }
        } else {
          ns.showNotice(resp.data.message, false);
        }

        return resp;
      });
    },
    registerUser: async function(data){
      const ns = (0,_stores_notice__WEBPACK_IMPORTED_MODULE_0__.noticeStore)();

      ns.hideNotice();

      return await Axios__WEBPACK_IMPORTED_MODULE_2__["default"].post(core.ajaxUrl, data).then((resp) => {
        if (resp.status === 200) {
          ns.showNotice(resp.data.message, true);

          if (!resp.data.status) {
            ns.showNotice(resp.data.message, false);
          }
        } else {
          ns.showNotice(resp.data.message, false);
        }

        return resp;
      });
    },
    confirmUserAction: async function(msg){
      return new Promise(function(resolve){
        if(confirm(msg)){
          resolve(1);
        } else {
          resolve(0);
        }
      });
    },
    toggleLoginForm: function () {
      this.showRegisterForm = false;
      this.showPasswordForm = false;
      this.showLoginForm = true;
    },
    toggleRegisterForm: function () {
      this.showPasswordForm = false;
      this.showLoginForm = false;
      this.showRegisterForm = true;
    },
    togglePasswordForm: function () {
      this.showRegisterForm = false;
      this.showLoginForm = false;
      this.showPasswordForm = true;
    },
  }
});


/***/ }),

/***/ "./assets/vue/stores/notice.js":
/*!*************************************!*\
  !*** ./assets/vue/stores/notice.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   noticeStore: () => (/* binding */ noticeStore)
/* harmony export */ });
/* harmony import */ var pinia__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pinia */ "./node_modules/pinia/dist/pinia.mjs");



const noticeStore = (0,pinia__WEBPACK_IMPORTED_MODULE_0__.defineStore)('noticeStore', {
  state: () => {
    return {
      visible: false,
      msg: '',
      status: false
    }
  },
  actions: {
    showNotice: function (msg, status) {
      this.visible = true;
      this.msg = msg;
      this.status = status;

      setTimeout(() => {
        this.hideNotice();
      }, 4000);
    },
    hideNotice: function () {
      this.visible = false;
    }
  }
});

/***/ }),

/***/ "./assets/vue/views/LoginForm.vue":
/*!****************************************!*\
  !*** ./assets/vue/views/LoginForm.vue ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _LoginForm_vue_vue_type_template_id_1a3b02c5__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LoginForm.vue?vue&type=template&id=1a3b02c5 */ "./assets/vue/views/LoginForm.vue?vue&type=template&id=1a3b02c5");
/* harmony import */ var _LoginForm_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./LoginForm.vue?vue&type=script&lang=js */ "./assets/vue/views/LoginForm.vue?vue&type=script&lang=js");
/* harmony import */ var _node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../node_modules/vue-loader/dist/exportHelper.js */ "./node_modules/vue-loader/dist/exportHelper.js");




;
const __exports__ = /*#__PURE__*/(0,_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_2__["default"])(_LoginForm_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__["default"], [['render',_LoginForm_vue_vue_type_template_id_1a3b02c5__WEBPACK_IMPORTED_MODULE_0__.render],['__file',"assets/vue/views/LoginForm.vue"]])
/* hot reload */
if (false) {}


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__exports__);

/***/ }),

/***/ "./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./assets/vue/views/LoginForm.vue?vue&type=script&lang=js":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./assets/vue/views/LoginForm.vue?vue&type=script&lang=js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var pinia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pinia */ "./node_modules/pinia/dist/pinia.mjs");
/* harmony import */ var _stores_global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../stores/global.js */ "./assets/vue/stores/global.js");
/* harmony import */ var _stores_notice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../stores/notice */ "./assets/vue/stores/notice.js");







/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  name: "LoginForm",
  data() {
    return {}
  },
  props:{
    active:{
      type: Boolean,
      required: true,
      default: true
    }
  },
  computed: {
    ...(0,pinia__WEBPACK_IMPORTED_MODULE_2__.mapState)(_stores_global_js__WEBPACK_IMPORTED_MODULE_0__.globalStore, {
      login: (store) => {
        return {
          nonce: store.endpoints.login.nonce,
          action: store.endpoints.login.action,
        };
      }
    }),
  },
  methods: {
    ...(0,pinia__WEBPACK_IMPORTED_MODULE_2__.mapActions)(_stores_global_js__WEBPACK_IMPORTED_MODULE_0__.globalStore, ["logUserIn", "loadGlobalData", "toggleLoginForm", "toggleRegisterForm", "togglePasswordForm"]),
    submitLoginInfo: function () {
      const data = new FormData(this.$refs.loginForm);

      this.logUserIn(data).then((resp) => {
        const status = resp.data.status;
        this.loadGlobalData().then( () => {
          if(status){
            setTimeout(() => {
              window.location.href = "/profile";
            }, 2000);
          }
        });
      })
    },
    
  },
});


/***/ }),

/***/ "./assets/vue/views/LoginForm.vue?vue&type=script&lang=js":
/*!****************************************************************!*\
  !*** ./assets/vue/views/LoginForm.vue?vue&type=script&lang=js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ _node_modules_vue_loader_dist_index_js_ruleSet_1_rules_4_use_0_LoginForm_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _node_modules_vue_loader_dist_index_js_ruleSet_1_rules_4_use_0_LoginForm_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./LoginForm.vue?vue&type=script&lang=js */ "./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./assets/vue/views/LoginForm.vue?vue&type=script&lang=js");
 

/***/ }),

/***/ "./assets/vue/views/LoginForm.vue?vue&type=template&id=1a3b02c5":
/*!**********************************************************************!*\
  !*** ./assets/vue/views/LoginForm.vue?vue&type=template&id=1a3b02c5 ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   render: () => (/* reexport safe */ _node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_1_node_modules_vue_loader_dist_index_js_ruleSet_1_rules_4_use_0_LoginForm_vue_vue_type_template_id_1a3b02c5__WEBPACK_IMPORTED_MODULE_0__.render)
/* harmony export */ });
/* harmony import */ var _node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_1_node_modules_vue_loader_dist_index_js_ruleSet_1_rules_4_use_0_LoginForm_vue_vue_type_template_id_1a3b02c5__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./LoginForm.vue?vue&type=template&id=1a3b02c5 */ "./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./assets/vue/views/LoginForm.vue?vue&type=template&id=1a3b02c5");


/***/ }),

/***/ "./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./assets/vue/views/LoginForm.vue?vue&type=template&id=1a3b02c5":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./assets/vue/views/LoginForm.vue?vue&type=template&id=1a3b02c5 ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   render: () => (/* binding */ render)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.runtime.esm-bundler.js");


const _hoisted_1 = ["value"]
const _hoisted_2 = ["value"]
const _hoisted_3 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createStaticVNode)("<div class=\"form-control inlineForm\"><div class=\"field-control half\"><label>Email: </label><input type=\"text\" value=\"\" name=\"email\" placeholder=\"Email Address\"></div><div class=\"field-control half\"><label>Password: </label><input type=\"password\" value=\"\" name=\"password\" placeholder=\"Password\"></div></div>", 1)
const _hoisted_4 = { class: "submit" }
const _hoisted_5 = /*#__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("button", {
  type: "submit",
  class: "btn btn-primary"
}, "Login", -1 /* HOISTED */)

function render(_ctx, _cache, $props, $setup, $data, $options) {
  return ($props.active)
    ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", {
        key: 0,
        class: (0,vue__WEBPACK_IMPORTED_MODULE_0__.normalizeClass)([{ loginForm: true, isActive: $props.active }])
      }, [
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("form", {
          onSubmit: _cache[1] || (_cache[1] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.withModifiers)((...args) => ($options.submitLoginInfo && $options.submitLoginInfo(...args)), ["prevent"])),
          ref: "loginForm"
        }, [
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
            type: "hidden",
            value: _ctx.login.nonce,
            name: "nonce"
          }, null, 8 /* PROPS */, _hoisted_1),
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {
            type: "hidden",
            value: _ctx.login.action,
            name: "action"
          }, null, 8 /* PROPS */, _hoisted_2),
          _hoisted_3,
          (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_4, [
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("p", null, [
              (0,vue__WEBPACK_IMPORTED_MODULE_0__.createTextVNode)(" Forgot Password? "),
              (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("a", {
                href: "",
                onClick: _cache[0] || (_cache[0] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.withModifiers)((...args) => (_ctx.togglePasswordForm && _ctx.togglePasswordForm(...args)), ["prevent"]))
              }, "Reset your password.")
            ]),
            _hoisted_5
          ])
        ], 544 /* NEED_HYDRATION, NEED_PATCH */)
      ], 2 /* CLASS */))
    : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true)
}

/***/ })

}]);
//# sourceMappingURL=bundle.assets_vue_views_LoginForm_vue.min.js.map